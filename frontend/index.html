<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    body {font-family: Arial; background:#f5f5f5; text-align:center; padding-top:40px;}
    #box { width:360px; margin:auto; padding:20px; background:white;
      border-radius:10px; box-shadow:0 0 10px #aaa; }
    input, button { width:90%; padding:10px; margin:8px 0; border-radius:6px; border:1px solid #999; }
    a { color:#0f69ff; text-decoration:none; }
  </style>
</head>
<body>

<div id="box">
  <h2>Login</h2>
  <input id="user" placeholder="Username"/>
  <input id="pass" type="password" placeholder="Password"/>
  <button onclick="login()">Login</button>
  <p style="color:red" id="msg"></p>
  <p style="font-size:0.9rem">Don't have an account? <a href="/register.html">Register here</a></p>
  <p style="font-size:0.85rem; margin-top:8px;">Admin: <b>admin / admin123</b></p>
</div>

<script>
  const API_BASE = "https://quiz-backend-yloo.onrender.com";

async function login(){
  const u = document.getElementById("user").value.trim();
  const p = document.getElementById("pass").value.trim();
  if(!u || !p){ document.getElementById('msg').innerText = 'Enter username and password'; return; }
  const res = await fetch('/api/login', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({username: u, password: p})
  });
  const data = await res.json();
  if(res.ok){
    localStorage.setItem('token', data.token);
    localStorage.setItem('user', u);
    if(data.role === 'admin') window.location = '/admin.html';
    else window.location = '/quiz.html';
  } else {
    document.getElementById("msg").innerText = data.error || 'Login failed';
  }
}
</script>

</body>
</html>
